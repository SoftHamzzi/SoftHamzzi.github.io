---
title:  "[κ²μ„ μ„λ²„] 6.4 λ©”μ‹μ§€ μ£Όκ³ λ°›κΈ°"
excerpt: "6.4"

categories:
  - GameServer
tags:
  - [GameServer]

toc: true
toc_sticky: true
 
date: 2026-02-23
last_modified_at: 2026-02-23
---
# π“¦ 6. κ²μ„ λ„¤νΈμ›ν¬ μ—”μ§„ ν”„λΌμ°λ“λ„·
## π‘‰π» 4. λ©”μ‹μ§€ μ£Όκ³ λ°›κΈ°

### π“¬ λ©”μ‹μ§€ μ „μ†΅ λ°©λ²•

**λ‘ κ°€μ§€ λ°©λ²•:**

1. **μ „ν†µμ μΈ λ°©λ²•μΌλ΅ λ°”μ΄λ„λ¦¬ λ°μ΄ν„° μ£Όκ³ λ°›κΈ°** (ν„μ¬ μ•μ•„λ³Ό λ°©λ²•)
2. λ‹¤λ¥Έ μ»΄ν“¨ν„°μ— μλ” ν•¨μλ¥Ό μ›κ²© νΈμ¶

---

### π“¤ 1. μ „ν†µμ μΈ λ°©λ²•μΌλ΅ λ°”μ΄λ„λ¦¬ λ°μ΄ν„° μ£Όκ³ λ°›κΈ°

**SendUserMessage() ν•¨μ:**

- NetClient/NetServerμ—λ” `SendUserMessage()` ν•¨μκ°€ μ΅΄μ¬ν•λ‹¤
- μƒλ€λ°©μ—κ² λ©”μ‹μ§€λ¥Ό μ „μ†΅ν•  μ μλ‹¤

---

### π”§ λ§¤κ°λ³€μ

**HostID λλ” HostID array:**

- λ©”μ‹μ§€λ¥Ό λ³΄λ‚΄κ³ μ ν•λ” λ€μƒ

**reliable λλ” unreliable:**

- **μ „μ†΅μ„ λ³΄μ¥ν• μ§€**, **λ³΄μ¥ν•μ§€ μ•μ§€λ§ μ¦‰μ‹ μ „μ†΅ν• μ§€**
- μ•”νΈν™” νΉμ€ μ••μ¶• μ—¬λ¶€, μ¤λλ λ©”μ‹μ§€λ” κ±΄λ„λ›Έμ§€ κ°™μ€ μµμ… μ΅΄μ¬
- μ΄λ“¤μ„ ν†µν‹€μ–΄ **RmiContext κµ¬μ΅°μ²΄**λΌκ³  ν•λ‹¤

**byte array:**

- λ³΄λ‚Ό λ©”μ‹μ§€λ¥Ό μλ―Έν•λ” λ°”μ΄λ„λ¦¬ λ°μ΄ν„°

---

### π“¨ λ©”μ‹μ§€ μ†΅μ‹  μμ‹

```cpp
unsigned char data[100];

// ν΄λΌμ΄μ–ΈνΈ β†’ μ„λ²„, Reliable
c->SendUserMessage(HostID_Server, RmiContext::ReliableSend, data, 100);
// μ„λ²„ β†’ ν΄λΌμ΄μ–ΈνΈ, Unreliable
s->SendUserMessage(ClientHostID, RmiContext::UnReliableSend, data, 50);

// μ„λ²„ β†’ λ‹¤μμ ν΄λΌμ΄μ–ΈνΈλ“¤, Unreliable
HostID sendTo[10];
s->SendUserMessage(sendTo, 10, RmiContext::UnreliableSend, data, 30);
```

---

### π“¥ λ©”μ‹μ§€ μμ‹  μμ‹

```cpp
c->OnReceiveUsermessage = [...]
	(HostID sender, const RmiContext& rmiContext, uint8_t* payload, int payloadLength) {
	... // μμ‹ λ μ΄λ²¤νΈ μ²λ¦¬
}
```

**λ™μ‘:**

- λ©”μ‹μ§€λ¥Ό μμ‹ ν•λ©΄ ν•΄λ‹Ή μ΄λ²¤νΈ ν•¨μκ°€ νΈμ¶λλ‹¤

**λ§¤κ°λ³€μ:**

- **sender**: λ„κ°€ λ³΄λƒλ”κ°€
- **rmiContext**: μ–΄λ– ν• λ°©μ‹μΌλ΅ λ°›μ•λ”κ°€
- **payload**: λ°›μ€ λ©”μ‹μ§€

---

# π§ μ •λ¦¬

| μ „μ†΅ λ°©μ‹ | νΉμ§• | μ‚¬μ© μ‹κΈ° |
| --- | --- | --- |
| **ReliableSend** | TCP κΈ°λ°, μ „μ†΅ λ³΄μ¥ | μ¤‘μ”ν• λ°μ΄ν„° (μ•„μ΄ν…, μ±„ν…) |
| **UnreliableSend** | UDP κΈ°λ°, λΉ λ¥Έ μ „μ†΅ | μ‹¤μ‹κ°„ λ°μ΄ν„° (μ„μΉ, μƒνƒ) |

**ν•µμ‹¬:**

- RmiContextλ΅ μ „μ†΅ μµμ… μ μ–΄
- λ‹¨μΌ/λ‹¤μ ν΄λΌμ΄μ–ΈνΈ μ „μ†΅ μ§€μ›
- μ΄λ²¤νΈ κΈ°λ° μμ‹  μ²λ¦¬