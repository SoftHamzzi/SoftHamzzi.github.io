---
title:  "[C++] í•­ëª© 40: ë‹¤ì¤‘ ìƒì†ì€ ì‹¬ì‚¬ìˆ™ê³ í•´ì„œ ì‚¬ìš©í•˜ì"
excerpt: "í•­ëª© 40"

categories:
  - Cpp
tags:
  - [Cpp]

toc: true
toc_sticky: true
 
date: 2025-10-28
last_modified_at: 2025-10-28
---
ì´ ê¸€ì€ ì•„ë˜ì˜ ì±…ì„ ìì„¸íˆ ì •ë¦¬í•œ í›„, ì •ë¦¬í•œ ê¸€ì„ GPTì—ê²Œ ìš”ì•½ì„ ìš”ì²­í•˜ì—¬ ì‘ì„±ë˜ì—ˆìŠµë‹ˆë‹¤.  
ì´í™í‹°ë¸Œ C++ ì œ3íŒ, ìŠ¤ì½§ ë§ˆì´ì–´ìŠ¤ ì €ì, ê³½ìš©ì¬ ë²ˆì—­
{: .notice--warning}

# ğŸ“¦ 6. ìƒì†, ê·¸ë¦¬ê³  ê°ì²´ ì§€í–¥ ì„¤ê³„
## ğŸ‘‰ğŸ» í•­ëª© 40: ë‹¤ì¤‘ ìƒì†ì€ ì‹¬ì‚¬ìˆ™ê³ í•´ì„œ ì‚¬ìš©í•˜ì

### âš ï¸ ë¬¸ì œ 1: ì´ë¦„ ëª¨í˜¸ì„±

```cpp
class BorrowableItem {
public:
	// ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ì„œ ì²´í¬ì•„ì›ƒ
	void checkOut();
	...
};

class ElectronicGadget {
private:
	// í…ŒìŠ¤íŠ¸ë¥¼ ì‹¤ì‹œí•˜ê³ , ì„±ê³µ ì—¬ë¶€ ë°˜í™˜
	bool checkOut() const;
	...
};

// ë‹¤ì¤‘ ìƒì†
class MP3Player:
	public BorrowableItem,
	public ElectronicGadget
{ ... };

int main() {
	MP3Player mp;
	// ì–´ë–¤ checkOutì„ ì‚¬ìš©í•  ê²ƒì¸ì§€ ì•Œ ìˆ˜ ì—†ìŒ!
	mp.checkOut(); // âŒ ëª¨í˜¸ì„± ì—ëŸ¬
}
```

**ë¬¸ì œ:**

- ë‘ í´ë˜ìŠ¤ì˜ checkOut í•¨ìˆ˜ì˜ ì˜ì—­ì´ **publicê³¼ privateë¡œ ë‹¤ë¦„**ì—ë„ ë¶ˆêµ¬í•˜ê³ , **ëª¨í˜¸ì„±ì´ ìƒê¸´ë‹¤**
- C++ ì»´íŒŒì¼ëŸ¬ëŠ” ìµœì  ì¼ì¹˜(best-match) í•¨ìˆ˜ì¸ì§€ í™•ì¸í•œ í›„, í•¨ìˆ˜ì˜ **ì ‘ê·¼ ê°€ëŠ¥ì„±ì„ ì ê²€**í•œë‹¤
- ì¦‰, publicê³¼ privateëŠ” ì ê²€ë„ ë˜ì§€ ì•ŠìŒ

**í•´ê²°:**

```cpp
mp.BorrowableItem::checkOut(); // âœ… ëª…ì‹œì ìœ¼ë¡œ ì§€ì •
```

ì§ì ‘ í´ë˜ìŠ¤ë¥¼ ëª…ì‹œí•¨ìœ¼ë¡œì¨ í•´ê²°í•  ìˆ˜ ìˆë‹¤.

---

### âš ï¸ ë¬¸ì œ 2: ì£½ìŒì˜ MI ë§ˆë¦„ëª¨ê¼´ (Deadly Diamond of MI)

```cpp
class File { ... }; // ë³€ìˆ˜ aê°€ ìˆë‹¤ ê°€ì •
class InputFile: public File { ... };
class OutputFile: public File { ... };
class IOFile:
	public InputFile,
	public OutputFile
{ ... };
```

**ê³„ì¸µ êµ¬ì¡°:**

```mermaid
---
config:
  layout: dagre
  theme: dark
---
flowchart BT
    IOFile["IOFile"] --> InputFile["InputFile"] & OutputFile["OutputFile"]
    InputFile --> File["File"]
    OutputFile --> File
```

**ë¬¸ì œ:**

- `File í´ë˜ìŠ¤`ì˜ ë³µì‚¬ë³¸ì´ **2ê°œ ì¡´ì¬**í•˜ê²Œ ëœë‹¤
- `ë³€ìˆ˜ a`ë„ **2ê°œê°€ ìƒê¸´ë‹¤**

---

### âœ… í•´ê²°: ê°€ìƒ ê¸°ë³¸ í´ë˜ìŠ¤ (Virtual Base Class)

```cpp
class File { ... }; // ë³€ìˆ˜ aê°€ ìˆë‹¤ ê°€ì •
class InputFile: virtual public File { ... };
class OutputFile: virtual public File { ... };
class IOFile:
	public InputFile,
	public OutputFile
{ ... };
```

**ê°œì„ ëœ ì :**

- ì´ì „ê³¼ ë‹¬ë¦¬, `ë³€ìˆ˜ a` **1ê°œë§Œ** ê°€ì§„ë‹¤

**í•˜ì§€ë§Œ ë¹„ìš©ì´ í¬ë‹¤:**

1. **í¬ê¸° ì¦ê°€**
    - ê°ì²´ì˜ í¬ê¸°ê°€ ì»¤ì§„ë‹¤
2. **ì†ë„ ì €í•˜**
    - ì ‘ê·¼ ì†ë„ê°€ ëŠë ¤ì§„ë‹¤
3. **ì´ˆê¸°í™” ë³µì¡ë„ ì¦ê°€**
    - ì´ˆê¸°í™”ê°€ í•„ìš”í•œ ê°€ìƒ ê¸°ë³¸ í´ë˜ìŠ¤ë¡œë¶€í„° íŒŒìƒëœ ê²½ìš°:
        - ê±°ë¦¬ì™€ ìƒê´€ì—†ì´ **ê°€ìƒ ê¸°ë³¸ í´ë˜ìŠ¤ì˜ ì¡´ì¬ë¥¼ ì—¼ë‘**ì— ë‘ì–´ì•¼ í•œë‹¤
        - ê¸°ì¡´ í´ë˜ìŠ¤ ê³„í†µì— íŒŒìƒ í´ë˜ìŠ¤ë¥¼ ì¶”ê°€í•  ë•Œë„, **ê°€ìƒ ê¸°ë³¸ í´ë˜ìŠ¤ì˜ ì´ˆê¸°í™”ë¥¼ ë– ë§¡ì•„ì•¼** í•œë‹¤

---

### ğŸ“Œ ê°€ìƒ ê¸°ë³¸ í´ë˜ìŠ¤ ì‚¬ìš© ì§€ì¹¨

### **1. ì“¸ í•„ìš”ê°€ ì—†ë‹¤ë©´, ê°€ìƒ ê¸°ë³¸ í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì§€ ë§ì**

> ë¹„ê°€ìƒ ìƒì†ì„ ì‚¬ìš©í•˜ì
> 

### **2. ì¨ì•¼ í•œë‹¤ë©´, ê°€ìƒ ê¸°ë³¸ í´ë˜ìŠ¤ì—ëŠ” ë°ì´í„°ë¥¼ ë„£ì§€ ë§ì**

> ì´ˆê¸°í™”ì™€ ëŒ€ì…ì˜ ë³µì¡ì„±ì„ ì¤„ì¼ ìˆ˜ ìˆë‹¤
> 

---

### âœ… ë‹¤ì¤‘ ìƒì†ì˜ ì˜¬ë°”ë¥¸ ì‚¬ìš© ì˜ˆì œ

ì¸í„°í˜ì´ìŠ¤ í´ë˜ìŠ¤ì™€ êµ¬í˜„ í´ë˜ìŠ¤ë¥¼ ê²°í•©í•˜ëŠ” ì˜ˆì œ:

### ì¸í„°í˜ì´ìŠ¤ í´ë˜ìŠ¤ ì •ì˜

```cpp
// ì¸í„°í˜ì´ìŠ¤ í´ë˜ìŠ¤
class IPerson {
public:
	virtual ~IPerson();

	virtual string name() const = 0;
	virtual string birthDate() const = 0;
};
```

### êµ¬í˜„ ë„ìš°ë¯¸ í´ë˜ìŠ¤ ì •ì˜

```cpp
class DatabaseID { ... };

class PersonInfo {
public:
	explicit PersonInfo(DatabaseID pid);
	virtual ~PersonInfo();

	virtual const char* theName() const;
	virtual const char* theBirthDate() const;
	...
private:
	virtual const char* valueDelimOpen() const;
	virtual const char* valueDelimClose() const;
	...
};

const char* PersonInfo::valueDelimOpen() const {
	return "[";
}

const char* PersonInfo::valueDelimClose() const {
	return "]";
}

// [Homer]ê³¼ ê°™ì´ í˜•ì‹í™”ëœ ì´ë¦„ì„ ë°˜í™˜í•œë‹¤.
const char* PersonInfo::theName() const {
	// êµ¬ì‹œëŒ€ì ì¸ ìŠ¤íƒ€ì¼ì„
	static char value[Max_Formmated_Field_Value_Length];

	strcpy(value, valueDelimOpen());
	strcat(value, valueDelimClose());
	return value;
}
```

### ë‹¤ì¤‘ ìƒì†ì„ ì‚¬ìš©í•œ êµ¬í˜„ í´ë˜ìŠ¤

```cpp
// ë‹¤ì¤‘ìƒì† MI, private ìƒì†ì´ ì‚¬ìš©ë¨
class CPerson: public IPerson, private PersonInfo {
public:
	explicit CPerson(DatabaseID pid): PersonInfo(pid) {}

	// ê¸°ë³¸ í´ë˜ìŠ¤ì˜ ìˆœìˆ˜ ê°€ìƒ í•¨ìˆ˜ì— êµ¬í˜„ ì œê³µ
	virtual string name() const {
		return PersonInfo::theName();
	}
	virtual string birthDate() const {
		return PersonInfo::theBirthDate();
	}

private:
	// ì´ ì¬ì •ì˜ ë²„ì „ì„ í†µí•´ Homerì™€ ê°™ì´ ì´ë¦„ì´ ë°˜í™˜ëœë‹¤.
	const char* valueDelimOpen() const { return ""; }
	const char* valueDelimClose() const { return ""; }
};
```

### ì‚¬ìš© ì˜ˆì‹œ

```cpp
// ë°ì´í„°ë² ì´ìŠ¤ IDë¡œë¶€í„° IPerson ê°ì²´ë¥¼ ë§Œë“œëŠ” íŒ©í† ë¦¬ í•¨ìˆ˜
// ì´ êµ¬ì¡°ê°€ í—·ê°ˆë¦¬ë©´, í•­ëª© 31ì„ ë³´ì.
shared_ptr<IPerson> makePerson(DatabaseID personIdentifier) {
	return make_shared<CPerson>(personIdentifier);
}

// ì‚¬ìš©ìë¡œë¶€í„° ë°ì´í„°ë² ì´ìŠ¤ IDë¥¼ ì–»ëŠ” í•¨ìˆ˜
DatabaseID askUserForDatabaseID();

int main() {
	DatabaseID id(askUserForDatabaseID());
	shared_ptr<IPerson> pp(makePerson(id));

	// ì´í›„ *ppì˜ ì¡°ì‘ì„ ìœ„í•´ IPersonì˜ ë©¤ë²„ í•¨ìˆ˜ ì‚¬ìš©
	...
}
```

---

### ğŸ’¡ CPerson êµ¬í˜„ ë¶„ì„

**ì„¤ê³„ ê²°ì •:**

1. **CPersonê³¼ PersonInfoì˜ ê´€ê³„**
    - is-implemented-in-terms-of ê´€ê³„ì´ë‹¤
    - ì•„ë˜ì˜ ë°©ì‹ìœ¼ë¡œ êµ¬í˜„ë  ìˆ˜ ìˆë‹¤:
        - ê°ì²´ í•©ì„±(í•­ëª© 38)
        - private ìƒì†(í•­ëª© 39)
2. **private ìƒì†ì„ ì„ íƒí•œ ì´ìœ **
    - valueDelimOpen(), valueDelimClose()ì˜ **ì¬ì •ì˜ê°€ í•„ìš”**í•˜ë‹¤
    - â†’ **private ìƒì† ì‚¬ìš©**
3. **public ìƒì†ì„ ì„ íƒí•œ ì´ìœ **
    - CPerson í´ë˜ìŠ¤ëŠ” **IPerson ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„**í•´ì•¼ í•œë‹¤
    - â†’ **public ìƒì† ì‚¬ìš©**

**ê²°ë¡ :**

> ë‹¤ì¤‘ ìƒì† í•„ìš”
> 

**ê³„ì¸µ êµ¬ì¡°:**

```mermaid
---
config:
  layout: dagre
  theme: dark
---
graph BT
    IPerson["IPerson"]
    PersonInfo["PersonInfo"]
    CPerson["CPerson"]

    CPerson -->|public| IPerson
    CPerson -->|private| PersonInfo
```

---

### ğŸ“Š ë‹¤ì¤‘ ìƒì† ì‚¬ìš© íŒ¨í„´ ì •ë¦¬

| íŒ¨í„´ | ì²« ë²ˆì§¸ ìƒì† | ë‘ ë²ˆì§¸ ìƒì† | ëª©ì  |
| --- | --- | --- | --- |
| **ì¸í„°í˜ì´ìŠ¤ + êµ¬í˜„** | public (ì¸í„°í˜ì´ìŠ¤) | private (êµ¬í˜„ ë„ìš°ë¯¸) | ê¶Œì¥ íŒ¨í„´ |
| **ì—¬ëŸ¬ ì¸í„°í˜ì´ìŠ¤** | public | public | ì£¼ì˜ í•„ìš” (ëª¨í˜¸ì„±) |
| **ë§ˆë¦„ëª¨ê¼´ ìƒì†** | ê°€ìƒ ìƒì† í•„ìš” | ê°€ìƒ ìƒì† í•„ìš” | ê°€ëŠ¥í•œ í”¼í•˜ê¸° |

---

### âš ï¸ ë‹¤ì¤‘ ìƒì† ì‚¬ìš© ì‹œ ì£¼ì˜ì‚¬í•­

### **í”¼í•´ì•¼ í•  ê²½ìš°:**

- ë‹¨ìˆœíˆ ì½”ë“œ ì¬ì‚¬ìš©ì„ ìœ„í•´ ì‚¬ìš©
- ëª…í™•í•œ ì„¤ê³„ ì´ìœ  ì—†ì´ ì‚¬ìš©
- ë§ˆë¦„ëª¨ê¼´ ê³„ì¸µ êµ¬ì¡°ê°€ í•„ìš”í•œ ê²½ìš° (ê°€ìƒ ìƒì†ì˜ ë¹„ìš©ì´ í¼)

### **ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ê²½ìš°:**

- **ì¸í„°í˜ì´ìŠ¤ í´ë˜ìŠ¤**ë¡œë¶€í„° public ìƒì†
- **êµ¬í˜„ì„ ë•ëŠ” í´ë˜ìŠ¤**ë¡œë¶€í„° private ìƒì†
- ì´ ë‘ ê°€ì§€ê°€ ì„ì´ëŠ” ê²½ìš°

---

### ğŸ§ ì •ë¦¬

1. **ë‹¤ì¤‘ ìƒì†ì€ ëª¨í˜¸ì„± ë¬¸ì œë¥¼ ì¼ìœ¼ì¼œ, ê°€ìƒ ìƒì†ì´ í•„ìš”í•´ì§ˆ ìˆ˜ ìˆë‹¤.**  
ì´ë¦„ ì¶©ëŒê³¼ ë§ˆë¦„ëª¨ê¼´ ìƒì† ë¬¸ì œë¥¼ ì£¼ì˜í•´ì•¼ í•œë‹¤.
2. **ê°€ìƒ ìƒì†ì€ ë¹„ìš©ì´ í¬ë‹¤:**
    - í¬ê¸° ë¹„ìš© â‡¡
    - ì†ë„ ë¹„ìš© â‡¡
    - ì´ˆê¸°í™” ë° ëŒ€ì… ì—°ì‚° ë³µì¡ë„ â‡¡
    
    **â†’ ê°€ìƒ ê¸°ë³¸ í´ë˜ìŠ¤ì—ëŠ” ë°ì´í„°ë¥¼ ë‘ì§€ ì•ŠëŠ” ê²ƒì´ ì¢‹ë‹¤**
    
3. **ë‹¤ì¤‘ ìƒì†ì„ ì œëŒ€ë¡œ ì“°ëŠ” ê²½ìš° ì¤‘ í•˜ë‚˜:**
    - ì¸í„°í˜ì´ìŠ¤ í´ë˜ìŠ¤ë¡œë¶€í„° **public ìƒì†**
    - êµ¬í˜„ì„ ë•ëŠ” í´ë˜ìŠ¤ë¡œë¶€í„° **private ìƒì†**
    
    **â†’ ì´ ë‘ ê°€ì§€ê°€ ì„ì´ëŠ” ê²½ìš°ì´ë‹¤**
    
4. **ë‹¤ì¤‘ ìƒì†ì€ ë‹¨ì¼ ìƒì†ë³´ë‹¤ ë³µì¡í•˜ë¯€ë¡œ ì‹¬ì‚¬ìˆ™ê³ í•´ì„œ ì‚¬ìš©í•˜ì.**  
ëª…í™•í•œ ì„¤ê³„ ì´ìœ ê°€ ìˆì„ ë•Œë§Œ ì‚¬ìš©í•˜ê³ , ê°€ëŠ¥í•˜ë©´ ë‹¨ìˆœí•œ ëŒ€ì•ˆì„ ë¨¼ì € ê³ ë ¤í•˜ì.