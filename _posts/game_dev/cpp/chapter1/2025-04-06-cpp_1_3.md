---
title:  "[C++] í•­ëª© 3: ë‚Œìƒˆë§Œ ë³´ì´ë©´ constë¥¼ ë“¤ì´ëŒ€ ë³´ì!"
excerpt: "í•­ëª© 3"

categories:
  - Cpp
tags:
  - [Cpp]

toc: true
toc_sticky: true
 
date: 2025-04-06
last_modified_at: 2025-04-06
---
ì´ ê¸€ì€ ì•„ë˜ì˜ ì±…ì„ ì •ë¦¬í•˜ì˜€ìŠµë‹ˆë‹¤.  
ì´í™í‹°ë¸Œ C++ ì œ3íŒ, ìŠ¤ì½§ ë§ˆì´ì–´ìŠ¤ ì €ì, ê³½ìš©ì¬ ë²ˆì—­
{: .notice--warning}

# ğŸ“¦ 1. C++ì— ì™”ìœ¼ë©´ C++ì˜ ë²•ì„ ë”°ë¦…ì‹œë‹¤
## ğŸ‘‰ğŸ» í•­ëª© 3: ë‚Œìƒˆë§Œ ë³´ì´ë©´ constë¥¼ ë“¤ì´ëŒ€ ë³´ì!

### 1. const í‚¤ì›Œë“œ

```cpp
char greeting[] = "Hello";

// 1. ë°ì´í„° ìˆ˜ì • O, í¬ì¸í„° ìˆ˜ì • O
char * p = greeting;

// 2. í¬ì¸í„° ìˆ˜ì • O, ë°ì´í„° ìˆ˜ì • X
const char * p = greeting;

// 3. í¬ì¸í„° ìˆ˜ì • X, ë°ì´í„° ìˆ˜ì • O
char * const p = greeting;

// 4. í¬ì¸í„° ìˆ˜ì • X, ë°ì´í„° ìˆ˜ì • X
const char * const p = greeting;
```

**const**ê°€ <b>*</b>ì˜ ì•ì— ìˆëŠ”ê°€, ë’¤ì— ìˆëŠ”ê°€? ì— ë”°ë¼ ì˜ë¯¸ê°€ ë‹¬ë¼ì§„ë‹¤.

```cpp
// ì•„ë˜ ë‘ í•¨ìˆ˜ëŠ” ë˜‘ê°™ë‹¤.
// ìƒìˆ˜ Widget ê°ì²´ë¥¼ ê°€ì§„ë‹¤.
void f1(const Widget * pw);
void f2(Widget const * pw);
```

ë˜í•œ **const**ì™€ **íƒ€ì…**ì˜ ìœ„ì¹˜ëŠ” ìƒê´€ì´ ì—†ë‹¤.

ì¦‰, ìœ„ì˜ f1ê³¼ f2ëŠ” ê°™ì€ í•¨ìˆ˜ì´ë‹¤.

```cpp
using namespace std;

vector<int> vec;
// T * constì²˜ëŸ¼ ë™ì‘í•œë‹¤.
const vector<int>::iterator iter = vec.begin();
*iter = 10; // O, ë°ì´í„° ìˆ˜ì • ê°€ëŠ¥
++iter; // X, ì£¼ì†Œ ìˆ˜ì • ë¶ˆê°€ëŠ¥

// const * Tì²˜ëŸ¼ ë™ì‘í•œë‹¤.
vector<int>::const_iterator cIter = vec.begin();
*cIter = 10; // X, ë°ì´í„° ìˆ˜ì • ë¶ˆê°€ëŠ¥
++cIter; // O, ì£¼ì†Œ ìˆ˜ì • ê°€ëŠ¥
```

**ë°˜ë³µì**ì—ì„œ **const**ë¥¼ ì‚¬ìš©í•˜ê³  ì‹¶ë‹¤ë©´, ìœ„ì˜ ë°©ë²•ì„ ì‚¬ìš©í•´ì•¼ í•œë‹¤.

```cpp
class Rational { ... };
// const ë°˜í™˜ê°’, const ë§¤ê°œë³€ìˆ˜
const Rational Operator*(const Rational& lhs, const Rational& rhs);

Rational a,b,c;
(a*b) = c; // ì—ëŸ¬! 
if(a*b = c); // ì—ëŸ¬!
```

**const** í‚¤ì›Œë“œëŠ” **í•¨ìˆ˜**ì—ì„œë„ ë¹›ì„ ë°œí•œë‹¤.

**constê°€ í¬í•¨ëœ ê²°ê³¼ ê°’**ì— **ëŒ€ì…**ì„ í•˜ëŠ” ì–´ì²˜êµ¬ë‹ˆ ì—†ëŠ” ì‹¤ìˆ˜ë¥¼ **ì˜ˆë°©**í•  ìˆ˜ ìˆë‹¤.

### 1.1. ìƒìˆ˜ ë©¤ë²„ í•¨ìˆ˜

```cpp
class TextBlock {
public:
	const char& operator[](size_t position) const {
		return text[position];
	}
	char& operator[](size_t position) {
		return text[position];
	}
	
private:
	string text;
}
```

const char& operator[](size_t position) **const** { â€¦ }

ìœ„ì˜ ë©¤ë²„ í•¨ìˆ˜ì—ì„œ **const**ê°€ ëì— ë¶™ì€ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

ì´ê²ƒì€ <b>"í•´ë‹¹ ë©¤ë²„ í•¨ìˆ˜ê°€ ìƒìˆ˜ ê°ì²´ì— ëŒ€í•´ í˜¸ì¶œëœ í•¨ìˆ˜"</b>ë¼ëŠ” ê²ƒì„ ì•Œë ¤ì¤€ë‹¤.

ì•„ë˜ì™€ ê°™ì€ ì½”ë“œì— í•´ë‹¹í•œë‹¤.

> const TextBlock ctb(â€Worldâ€); â†’ ì´ê²ƒì€ ìƒìˆ˜ ê°ì²´ë¡œ ì„ ì–¸ë˜ì—ˆë‹¤.  
cout << ctb[0];

ì´ë¥¼ í†µí•´ ì–»ì„ ìˆ˜ ìˆëŠ” **ì¥ì **ì€ ë‘ê°€ì§€ê°€ ìˆë‹¤.

```
1. í´ë˜ìŠ¤ì˜ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì´í•´í•˜ê¸° ì¢‹ì•„ì§„ë‹¤.  
â†’ í´ë˜ìŠ¤ë¡œ ë§Œë“¤ì–´ì§„ â€˜ê°ì²´ë¥¼ ë³€ê²½í•  ìˆ˜ ìˆëŠ” í•¨ìˆ˜â€™ì™€ â€˜ë³€ê²½í•  ìˆ˜ ì—†ëŠ” í•¨ìˆ˜â€™ì˜ êµ¬ë¶„ì„  
ì‚¬ìš©ì ì¸¡ì—ì„œ í•˜ê¸°ê°€ ì‰¬ì›Œì§„ë‹¤.
2. ìƒìˆ˜ ê°ì²´ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ëœë‹¤.  
â†’ ì½”ë“œì˜ ì„±ëŠ¥ì„ ë†’ì´ê¸° ìœ„í•´ì„  ê°ì²´ ì „ë‹¬ì„  
â€˜ìƒìˆ˜ ê°ì²´ì— ëŒ€í•œ ì°¸ì¡°ì(reference-to-const)â€™ë¡œ ì§„í–‰í•´ì•¼ í•œë‹¤.
```

ìœ„ì™€ ê°™ì€ ì¥ì ì„ ì–»ì„ ìˆ˜ ìˆê¸°ì— ì•Œì•„ë‘ê³  ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤.

### 1.2. const  ë©¤ë²„ í•¨ìˆ˜ ì˜¤ë²„ë¡œë”©

```cpp
class TextBlock {
public:
	// (1) ìƒìˆ˜ ê°ì²´ì— ëŒ€í•œ operator[]
	const char& operator[](size_t position) const {
		return text[position];
	}
	// (2) ë¹„ìƒìˆ˜ ê°ì²´ì— ëŒ€í•œ operator[]
	char& operator[](size_t position) {
		return text[position];
	}
	
private:
	string text;
}
```

ìœ„ì—ì„œ ì–¸ê¸‰í–ˆë˜ ì´ ì½”ë“œì—ì„œ ë‘ ë©¤ë²„ í•¨ìˆ˜ëŠ” constì˜ ì°¨ì´ë§Œ ìˆë‹¤.

ì´ëŸ¬í•œ ë©¤ë²„ í•¨ìˆ˜ë“¤ì€ **ì˜¤ë²„ë¡œë”©**ì´ ê°€ëŠ¥í•˜ë‹¤.

```cpp
TextBlock tb("Hello");
cout << tb[0]; // 2ë²ˆ ë©¤ë²„ í•¨ìˆ˜ í˜¸ì¶œ

const TextBlock ctb("World");
cout << ctb[0]; // 1ë²ˆ ë©¤ë²„ í•¨ìˆ˜ í˜¸ì¶œ
```

ê°ì²´ë¥¼ ìƒì„±í•œ ë’¤, ìœ„ì™€ ê°™ì´ ì‚¬ìš©í•˜ë©´ ê°ì ë‹¤ë¥¸ ë©¤ë²„ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•  ìˆ˜ ìˆë‹¤.

ìƒìˆ˜ ê°ì²´ê°€ ìƒê¸°ëŠ” ê²½ìš°ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.

1. ìƒìˆ˜ ê°ì²´ì— ëŒ€í•œ í¬ì¸í„°ë¡œ ê°ì²´ê°€ ì „ë‹¬
2. ìƒìˆ˜ ê°ì²´ì— ëŒ€í•œ ì°¸ì¡°ìë¡œ ê°ì²´ê°€ ì „ë‹¬  
<br>
```cpp
cout << tb[0]; // O
tb[0] = 'x'; // O
cout << ctb[0]; // O
ctb[0] = 'x'; // X, ctb ê°ì²´ì— ì“°ê¸°ëŠ” ë¶ˆê°€ëŠ¥í•˜ë‹¤.
```

ì—¬ê¸°ì„œ ëˆˆì—¬ê²¨ ë³´ì•„ì•¼ í•  ì ë“¤ì´ ìˆë‹¤.

1. ë‘ë²ˆì§¸ ì¤„ì—ì„œ tb[0] = â€˜xâ€™ëŠ” tb.text[0]ì˜ ì‚¬ë³¸ì— ê°’ì„ ëŒ€ì…í•˜ëŠ” ê²ƒì´ë¯€ë¡œ ì‹¤ì§ˆì ìœ¼ë¡œ ìˆ˜ì •ë˜ì§€ ì•ŠëŠ”ë‹¤.
2. ë„¤ë²ˆì§¸ ì¤„ì—ì„œ ë°œìƒí•œ ì—ëŸ¬ëŠ” operator[]ì˜ ë°˜í™˜ íƒ€ì…ì´ constì´ê¸° ë•Œë¬¸ì— ìƒê¸´ ì—ëŸ¬ì´ë‹¤.

### 1.3 ë¹„íŠ¸ìˆ˜ì¤€(ë¬¼ë¦¬ì ) ìƒìˆ˜ì„±ê³¼ ë…¼ë¦¬ì  ìƒìˆ˜ì„±

> **ë¹„íŠ¸ìˆ˜ì¤€ ìƒìˆ˜ì„±**: ì–´ë–¤ ë©¤ë²„ í•¨ìˆ˜ê°€ ê·¸ ê°ì²´ì˜ ì–´ë–¤ ë°ì´í„° ë©¤ë²„ë„ ê±´ë“œë¦¬ì§€ ì•Šì•„ì•¼ ê·¸ ë©¤ë²„ í•¨ìˆ˜ê°€ â€˜constâ€™ì„ì„ ì¸ì •í•œë‹¤.  
>
>**ë…¼ë¦¬ì  ìƒìˆ˜ì„±**: ì¼ë¶€ ëª‡ ë¹„íŠ¸ ì •ë„ëŠ” ìˆ˜ì •í•  ìˆ˜ ìˆë˜, ê·¸ê²ƒì„ ì‚¬ìš©ì ì¸¡ì—ì„œ ì•Œì•„ì±„ì§€ ëª»í•˜ë©´ ëœë‹¤.

ë¹„íŠ¸ìˆ˜ì¤€ ìƒì†ì„±ì€ ë¬¸ì œê°€ ìˆë‹¤.

ë©¤ë²„í•¨ìˆ˜ ë‚´ì—ì„œëŠ” ë³€ìˆ˜ê°€ ìˆ˜ì •ë˜ì§€ ì•Šì§€ë§Œ, ì™¸ë¶€ì—ì„œ ìˆ˜ì •ë˜ëŠ” ê²½ìš°ê°€ ìƒê¸¸ ìˆ˜ ìˆë‹¤.

```cpp
class CTextBlock {
public:
	char& operator[](size_t position) const {
		return pText[position];
	}

private:
	char* pText;
};

const CTextBlock cctb("Hello");
char* pc = &cctb[0];
*pc = 'J';
```

ìœ„ì˜ ì½”ë“œê°€ ê·¸ ì˜ˆì‹œë¡œ í•¨ìˆ˜ì˜ ê²°ê³¼ ê°’ì´ ì£¼ì†Œì´ê¸°ì—, ì£¼ì†Œê°€ ê°€ë¦¬í‚¤ëŠ” ê°’ì„ ìˆ˜ì •í•˜ê³  ìˆë‹¤.

ì´ëŸ° ìƒí™©ì„ ë³´ì™„í•˜ê¸° ìœ„í•´ ë‚˜ì˜¨ ê°œë…ì´ ë…¼ë¦¬ì  ìƒìˆ˜ì„±ì´ë‹¤.

### 1.4. mutable í‚¤ì›Œë“œ

```cpp
class CTextBlock {
public:
	size_t length() const;
	
private:
	char* pText;
	size_t textLength;
	bool lengthIsValid;
};

size_t CTextBlock::length() const {
	if(!lengthIsValid) {
		textLength = strlen(pText); // ì—ëŸ¬!
		lengthIsValid = true; // ì—ëŸ¬!
	}
	
	return textLength;
}
```

ìœ„ì˜ ì½”ë“œëŠ” ë¹„íŠ¸ìˆ˜ì¤€ ìƒìˆ˜ì„±ì—ë„ ë§ì§€ ì•Šìœ¼ë©°, constê°€ í¬í•¨ëœ ë©¤ë²„ í•¨ìˆ˜ ë‚´ì—ì„œ

ë³€ìˆ˜ë¥¼ ìˆ˜ì •í•˜ë ¤í•˜ê³  ìˆìœ¼ë¯€ë¡œ, ì—ëŸ¬ê°€ ë‚œë‹¤.

ì´ëŸ° ìƒí™©ì„ ìœ„í•´ ë‚˜ì˜¨ ê²ƒì´ mutable í‚¤ì›Œë“œì´ë‹¤.

```cpp
...
mutable size_t textLength;
mutable bool lengthIsValid;
...
```

ë³€ìˆ˜ë¥¼ ì„ ì–¸í•  ë•Œ, ì•ì— mutableë§Œ ë¶™ì—¬ì£¼ë©´ constì˜ ì œí•œì—ì„œ ì˜ˆì™¸ ëŒ€ìš°ë¥¼ ë°›ê²Œ ëœë‹¤.

### 1.5. ì½”ë“œ ì¤‘ë³µ ì œê±°

```cpp
class TextBlock {
public:
	const char& operator[](size_t position) const {
		...
		return text[position];
	}
	
	char& operator[](size_t position) {
		return const_cast<char&>( // constë¥¼ ë–¼ì–´ëƒ„
			static_cast<const TextBlock&> // constë¥¼ ë¶™ì„
			(*this)[position] // operator[]ì˜ ìƒìˆ˜ ë²„ì „ í˜¸ì¶œ
		);
	}
};
```

<b>constê°€ ë¶™ê³  ì•ˆë¶™ê³  ì°¨ì´ë§Œ ìˆëŠ” í•¨ìˆ˜</b>ë¥¼ ë§Œë“¤ë ¤ê³  í•œë‹¤.

ì´ë¥¼ ë§Œë“¤ê¸° ìœ„í•´ ì¤‘ë³µëœ ì½”ë“œë¥¼ ë‘ë²ˆ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ë°©ë²•ë„ ìˆë‹¤.

1. const í‚¤ì›Œë“œë¥¼ ë¶™ì¸ë‹¤.
2. operatorì˜ ìƒìˆ˜ ë©¤ë²„í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•œë‹¤.
3. const í‚¤ì›Œë“œë¥¼ ë—€ë‹¤.