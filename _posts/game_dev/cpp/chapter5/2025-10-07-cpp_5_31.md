---
title:  "[C++] í•­ëª© 31: íŒŒì¼ ì‚¬ì´ì˜ ì»´íŒŒì¼ ì˜ì¡´ì„±ì„ ìµœëŒ€ë¡œ ì¤„ì´ì"
excerpt: "í•­ëª© 31"

categories:
  - Cpp
tags:
  - [Cpp]

toc: true
toc_sticky: true
 
date: 2025-10-07
last_modified_at: 2025-10-07
---
ì´ ê¸€ì€ ì•„ë˜ì˜ ì±…ì„ ìì„¸íˆ ì •ë¦¬í•œ í›„, ì •ë¦¬í•œ ê¸€ì„ GPTì—ê²Œ ìš”ì•½ì„ ìš”ì²­í•˜ì—¬ ì‘ì„±ë˜ì—ˆìŠµë‹ˆë‹¤.  
ì´í™í‹°ë¸Œ C++ ì œ3íŒ, ìŠ¤ì½§ ë§ˆì´ì–´ìŠ¤ ì €ì, ê³½ìš©ì¬ ë²ˆì—­
{: .notice--warning}

# ğŸ“¦ 5. êµ¬í˜„
## ğŸ‘‰ğŸ» í•­ëª© 31: íŒŒì¼ ì‚¬ì´ì˜ ì»´íŒŒì¼ ì˜ì¡´ì„±ì„ ìµœëŒ€ë¡œ ì¤„ì´ì

---

### âš ï¸ ë¬¸ì œ ìƒí™©: ê³¼í•œ ì»´íŒŒì¼ ì˜ì¡´ì„±

í´ë˜ìŠ¤ ì •ì˜ëŠ” í´ë˜ìŠ¤ ì¸í„°í˜ì´ìŠ¤ë§Œ ì§€ì •í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, **êµ¬í˜„ ì„¸ë¶€ ì‚¬í•­ê¹Œì§€ ë§ì´ ì§€ì •**í•œë‹¤.

```cpp
#include <string>
#include "date.h"
#include "address.h"

using namespace std;

class Person {
public:
	Person(const string& name, const Date& birthday, const Address& addr);
	string name() const;
	string birthDate() const;
	string address() const;
	...

private:
	string theName;
	Date theBirthDate;
	Address theAddress;
};
```

**ë¬¸ì œ:**

- í•œ í—¤ë” íŒŒì¼ ë‚´ì—ì„œ ë‹¤ë¥¸ í—¤ë” íŒŒì¼ë“¤ì„ #include ì‹œí‚¤ë©´ **ì»´íŒŒì¼ ì˜ì¡´ì„±ì´ ì»¤ì§„ë‹¤**
- **êµ¬í˜„ë¶€ë§Œ ì‚´ì§ ë°”ê¾¸ë”ë¼ë„**, ë¹Œë“œë¥¼ í•˜ë©´ ì—°ê´€ì´ ë˜ì–´ ìˆëŠ” íŒŒì¼ë“¤ì´ **ëª½ë•… ë‹¤ì‹œ ì»´íŒŒì¼** í•˜ê²Œ ëœë‹¤
- #include í•œ í—¤ë” íŒŒì¼ì€ ë¬¼ë¡ , ì´ë“¤ê³¼ ì—®ì¸ í—¤ë” íŒŒì¼ì´ ë³€ê²½ë˜ëŠ” ê²½ìš°, Person.hì™€ Person í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•˜ëŠ” íŒŒì¼ë“¤ì´ ëª½ë•… ë‹¤ì‹œ ì»´íŒŒì¼ ë˜ì–´ì•¼ í•œë‹¤

---

### âœ… ì²« ë²ˆì§¸ ì‹œë„: ì „ë°© ì„ ì–¸ (ì‹¤íŒ¨)

êµ¬í˜„ë¶€ë¥¼ ë¶„ë¦¬í•˜ê¸° ìœ„í•´ **ì „ë°© ì„ ì–¸**ì„ ì‚¬ìš©í•˜ë ¤ê³  ì‹œë„í•´ë³´ì:

```cpp
namespace std {
	class string;
}; // string ì „ë°© ì„ ì–¸(í‹€ë¦¼)

using std::string;

class Date; // ì „ë°© ì„ ì–¸
class Address; // ì „ë°© ì„ ì–¸

class Person {
public:
	Person(const string& name, const Date& birthday, const Address& addr);
	string name() const;
	string birthDate() const;
	string address() const;
	...
};
```

**ë¬¸ì œì :**

1. **stringì€ í´ë˜ìŠ¤ê°€ ì•„ë‹Œ typedefë¡œ ì •ì˜ëœë‹¤**
2. **ì»´íŒŒì¼ ë„ì¤‘ ê°ì²´ë“¤ì˜ í¬ê¸°ë¥¼ ì•Œì•„ì•¼ í•œë‹¤**

```cpp
int main() {
	int x;

	Person p { params };
	...
}
```

- ì»´íŒŒì¼ëŸ¬ëŠ” intì™€ Personì„ ë‹´ì„ ê³µê°„ì„ í• ë‹¹í•´ì•¼ í•¨
- Person ê°ì²´ í•˜ë‚˜ì˜ í¬ê¸°ë¥¼ ì•Œì•„ì•¼ í•¨
- Person í´ë˜ìŠ¤ì˜ ì •ì˜ë¥¼ ë´ì•¼í•¨

---

### âœ… í•´ê²°ì±…: pimpl ê´€ìš©êµ¬

ì´ì „ì˜ ë¬¸ì œì ì„ **pimpl ê´€ìš©êµ¬**ë¥¼ í†µí•´ í•´ê²°í•  ìˆ˜ ìˆë‹¤.

```cpp
#include <string>
#include <memory>

using std::string;
using std::shared_ptr;

class PersonImpl;

class Date;
class Address;

class Person {
public:
	Person(const string& name, const Date& birthday, const Address& addr);
	string name() const;
	string birthDate() const;
	string address() const;
	...

private:
	shared_ptr<PersonImpl> pImpl;
};
```

**í•µì‹¬:**

- **ì¸í„°í˜ì´ìŠ¤ì™€ êµ¬í˜„ì´ ë¶„ë¦¬ë¨**
- Person êµ¬í˜„ë¶€ë¥¼ ê³ ì³ë„ **ì»´íŒŒì¼ì„ ë‹¤ì‹œ í•  í•„ìš”ê°€ ì—†ì–´ì§„ë‹¤**

---

### ğŸ“Œ ì»´íŒŒì¼ ì˜ì¡´ì„± ìµœì†Œí™” ì „ëµ

### 1. **ê°ì²´ ì°¸ì¡°ì ë° í¬ì¸í„°ë¡œ ì¶©ë¶„í•˜ë©´ ê°ì²´ë¥¼ ì§ì ‘ ì“°ì§€ ì•ŠëŠ”ë‹¤**

- **íŠ¹ì • íƒ€ì…**ì— ëŒ€í•œ **ì°¸ì¡°ì ë° í¬ì¸í„°**ë¥¼ ì •ì˜í•  ë•Œ â†’ íŠ¹ì • íƒ€ì…ì˜ **ì„ ì–¸ë¶€ë§Œ** í•„ìš”
- **íŠ¹ì • íƒ€ì…**ì˜ **ê°ì²´**ë¥¼ ì •ì˜í•  ë•Œ â†’ íŠ¹ì • íƒ€ì…ì˜ **ì •ì˜** í•„ìš”

### 2. **í•  ìˆ˜ ìˆìœ¼ë©´ í´ë˜ìŠ¤ ì •ì˜ ëŒ€ì‹  ì„ ì–¸ì— ìµœëŒ€í•œ ì˜ì¡´í•˜ì**

íŠ¹ì • í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•˜ëŠ” í•¨ìˆ˜ë¥¼ ì„ ì–¸í•  ë•Œ â†’ íŠ¹ì • í´ë˜ìŠ¤ì˜ ì„ ì–¸ë¶€ë§Œ í•„ìš”

```cpp
class Date; // í´ë˜ìŠ¤ ì„ ì–¸

Date today(); // íŠ¹ì • í´ë˜ìŠ¤ë¥¼ ë°˜í™˜í•´ë„,
void clearAppointments(Date d); // íŠ¹ì • í´ë˜ìŠ¤ë¥¼ ì „ë‹¬í•´ë„,
// â†’ ì„ ì–¸ë§Œ í•´ì£¼ë©´ OK
```

### 3. **ì„ ì–¸ë¶€ì™€ ì •ì˜ë¶€ì— ëŒ€í•´ ë³„ë„ì˜ í—¤ë” íŒŒì¼ì„ ì œê³µí•˜ì**

ì„ ì–¸ë¶€ë¥¼ ìœ„í•œ í—¤ë”íŒŒì¼, ì •ì˜ë¶€ë¥¼ ìœ„í•œ í—¤ë”íŒŒì¼ë¡œ ë‚˜ëˆ  ê´€ë¦¬

```cpp
// date í´ë˜ìŠ¤ ì„ ì–¸ë¶€ í—¤ë”íŒŒì¼(ì •ì˜ X)
#include "datefwd.h"

Date today();
void clearAppointments(Date d);
```

---

### ğŸ“š ì•Œì•„ë‘ë©´ ì¢‹ì€ ê²ƒë“¤

### **<iosfwd> íŒŒì¼**

- C++ì—ì„œ ì§€ì›í•˜ëŠ” iostream ê´€ë ¨ í•¨ìˆ˜ ë° í´ë˜ìŠ¤ë“¤ì˜ **ì„ ì–¸ë¶€ë§Œ**ìœ¼ë¡œ êµ¬ì„±ëœ í—¤ë”
- ê° ì •ì˜ë¶€ëŠ” ì¼ì •í•œ ë¶„ë¥˜ì— ë”°ë¼ <sstream>, <streambuf>, <fstream>, <iostream> ë“±ìœ¼ë¡œ ë‚˜ë‰¨
- **ì´ë²ˆ í•­ëª© ë‚´ìš©ì´** í…œí”Œë¦¿ì´ ì•„ë‹Œ íŒŒì¼ë¿ë§Œ ì•„ë‹ˆë¼ **í…œí”Œë¦¿ì—ë„ ë“¤ì–´ë§ìŒ**

### **export í‚¤ì›Œë“œ**

- í…œí”Œë¦¿ ì„ ì–¸ê³¼ í…œí”Œë¦¿ ì •ì˜ë¥¼ ë¶„ë¦¬í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” ê¸°ëŠ¥
- í˜„ì¥ì—ì„œ ì˜ ì“°ì´ì§€ ì•ŠëŠ”ë‹¤

---

### âœ… pimpl ê´€ìš©êµ¬ ì‚¬ìš© ë°©ë²•

### ğŸ‘‰ğŸ» 1. í•¸ë“¤ í´ë˜ìŠ¤

> í•¸ë“¤ í´ë˜ìŠ¤ì— ëŒ€ì‘ë˜ëŠ” êµ¬í˜„ í´ë˜ìŠ¤ ìª½ìœ¼ë¡œ í•¨ìˆ˜ í˜¸ì¶œì„ ì „ë‹¬í•˜ì—¬,  
êµ¬í˜„ í´ë˜ìŠ¤ê°€ ì‹¤ì œ ì‘ì—…ì„ ìˆ˜í–‰í•˜ë„ë¡ í•œë‹¤.

**Person.h (í•¸ë“¤ í´ë˜ìŠ¤ í—¤ë”)**

```cpp
// Person.h
#pragma once
#include <memory>
#include <string>

class Date;
class Address;
class PersonImpl;   // ì „ë°© ì„ ì–¸

class Person {
public:
    Person(const std::string& name, const Date& birthday, const Address& addr);
    ~Person();

    std::string name() const;
    std::string birthDate() const;
    std::string address() const;

private:
    std::shared_ptr<PersonImpl> pImpl;   // êµ¬í˜„ë¶€ë¥¼ ê°€ë¦¬í‚¤ëŠ” í¬ì¸í„°
};
```

**Person.cpp (í•¸ë“¤ í´ë˜ìŠ¤ êµ¬í˜„)**

```cpp
// Person.cpp
#include "Person.h"
#include "PersonImpl.h"

Person::Person(const std::string& name, const Date& birthday, const Address& addr)
    : pImpl(std::make_shared<PersonImpl>(name, birthday, addr)) {}

Person::~Person() = default;

std::string Person::name() const {
    return pImpl->name();
}

std::string Person::birthDate() const {
    return pImpl->birthDate();
}

std::string Person::address() const {
    return pImpl->address();
}
```

**PersonImpl.h (êµ¬í˜„ í´ë˜ìŠ¤ í—¤ë”)**

```cpp
// PersonImpl.h
#pragma once
#include <string>
#include "Date.h"
#include "Address.h"

class PersonImpl {
public:
    PersonImpl(const std::string& name, const Date& birthday, const Address& addr);

    std::string name() const;
    std::string birthDate() const;
    std::string address() const;

private:
    std::string theName;
    Date theBirthDate;
    Address theAddress;
};
```

**PersonImpl.cpp (êµ¬í˜„ í´ë˜ìŠ¤ ì†ŒìŠ¤)**

```cpp
// PersonImpl.cpp
#include "PersonImpl.h"

PersonImpl::PersonImpl(const std::string& name, const Date& birthday, const Address& addr)
    : theName(name), theBirthDate(birthday), theAddress(addr) {}

std::string PersonImpl::name() const {
    return theName;
}

std::string PersonImpl::birthDate() const {
    return theBirthDate.toString();
}

std::string PersonImpl::address() const {
    return theAddress.toString();
}
```

**main.cpp (ì‚¬ìš© ì˜ˆì‹œ)**

```cpp
// main.cpp
#include <iostream>
#include "Person.h"
#include "Date.h"
#include "Address.h"

int main() {
    Date birth(1990, 5, 20);
    Address addr("Seoul", "Gangnam", "123-45");

    Person p("Kim", birth, addr);

    std::cout << p.name() << " was born on "
              << p.birthDate() << " and lives at "
              << p.address() << std::endl;

    return 0;
}
```

---

### ğŸ‘‰ğŸ» 2. ì¸í„°í˜ì´ìŠ¤ í´ë˜ìŠ¤

> ì¸í„°í˜ì´ìŠ¤ë¥¼ ì¶”ìƒ ê¸°ë³¸ í´ë˜ìŠ¤ë¥¼ í†µí•´ ë§ˆë ¨í•˜ê³ ,  
ì´ í´ë˜ìŠ¤ë¡œë¶€í„° íŒŒìƒ í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ ìˆ˜ ìˆê²Œ í•œë‹¤. 

**Person.h (ì¸í„°í˜ì´ìŠ¤ í´ë˜ìŠ¤ í—¤ë”)**

```cpp
// Person.h
#pragma once
#include <string>
#include <memory>

class Date;
class Address;

class Person {
public:
    virtual ~Person() {}

		// ìˆœìˆ˜ ê°€ìƒ í•¨ìˆ˜
    virtual std::string name() const = 0;
    virtual std::string birthDate() const = 0;
    virtual std::string address() const = 0;

    // ê°ì²´ ìƒì„±ì„ ìœ„í•œ íŒ©í† ë¦¬ í•¨ìˆ˜
    static std::shared_ptr<Person> create(const std::string& name,
                                          const Date& birthday,
                                          const Address& addr);
};
```

**í•µì‹¬:**

- ì¸í„°í˜ì´ìŠ¤ í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ”, **ê°ì²´ ìƒì„± ìˆ˜ë‹¨ì´ ìµœì†Œí•œ í•˜ë‚˜ ì¡´ì¬í•´ì•¼ í•œë‹¤** (create í•¨ìˆ˜)

**Person.cpp (íŒ©í† ë¦¬ í•¨ìˆ˜ êµ¬í˜„)**

```cpp
// Person.cpp
#include "Person.h"
#include "RealPerson.h"

std::shared_ptr<Person> Person::create(const std::string& name,
                                       const Date& birthday,
                                       const Address& addr) {
    return std::make_shared<RealPerson>(name, birthday, addr);
}
```

**RealPerson.h (êµ¬í˜„ í´ë˜ìŠ¤ í—¤ë”)**

```cpp
// RealPerson.h
#pragma once
#include "Person.h"
#include "Date.h"
#include "Address.h"

class RealPerson : public Person {
public:
    RealPerson(const std::string& name, const Date& birthday, const Address& addr);

		// ê°€ìƒí•¨ìˆ˜ êµ¬í˜„
    std::string name() const override;
    std::string birthDate() const override;
    std::string address() const override;

private:
    std::string theName;
    Date theBirthDate;
    Address theAddress;
};
```

**RealPerson.cpp (êµ¬í˜„ í´ë˜ìŠ¤ ì†ŒìŠ¤)**

```cpp
// RealPerson.cpp
#include "RealPerson.h"

RealPerson::RealPerson(const std::string& name, const Date& birthday, const Address& addr)
    : theName(name), theBirthDate(birthday), theAddress(addr) {}

std::string RealPerson::name() const {
    return theName;
}

std::string RealPerson::birthDate() const {
    return theBirthDate.toString(); // Date í´ë˜ìŠ¤ì— toString() ìˆë‹¤ê³  ê°€ì •
}

std::string RealPerson::address() const {
    return theAddress.toString(); // Address í´ë˜ìŠ¤ì— toString() ìˆë‹¤ê³  ê°€ì •
}
```

**ì‚¬ìš© ì˜ˆì‹œ (main.cpp)**

```cpp
// main.cpp
#include <iostream>
#include "Person.h"
#include "Date.h"
#include "Address.h"

int main() {
    Date birth(1990, 5, 20);
    Address addr("Seoul", "Gangnam", "123-45");

    auto person = Person::create("Kim", birth, addr);

    std::cout << person->name() << " was born on "
              << person->birthDate() << " and lives at "
              << person->address() << std::endl;

    return 0;
}
```

**í™•ì¥ ê°€ëŠ¥ì„±:**

- Person::create í•¨ìˆ˜ë¥¼ ì œëŒ€ë¡œ ë§Œë“¤ë ¤ë©´:
    - enumì„ í†µí•´ íƒ€ì… ì‹ë³„ìë¥¼ ì •ì˜ (e.g. Real, Student, Employee)
    - create í•¨ìˆ˜ì˜ ë§¤ê°œë³€ìˆ˜ì— íƒ€ì… ì‹ë³„ì í¬í•¨
    - íƒ€ì… ì‹ë³„ìë¥¼ í†µí•´, ë‹¤ë¥¸ íƒ€ì…ì˜ íŒŒìƒ í´ë˜ìŠ¤ ê°ì²´ ìƒì„± ê°€ëŠ¥
- ì¸í„°í˜ì´ìŠ¤ í´ë˜ìŠ¤ êµ¬í˜„ ë°©ë²•ì—ëŠ” ìœ„ ì˜ˆì œ ë°©ì‹ ë§ê³ ë„, **ë‹¤ì¤‘ ìƒì†**ì„ ì´ìš©í•˜ëŠ” ë°©ì‹ë„ ìˆë‹¤ (í•­ëª© 40)

---

### â pimpl ë°©ì‹ì˜ ë‹¨ì 

- **ê³µí†µ ë‹¨ì **
    1. **ì¸ë¼ì¸ í•¨ìˆ˜ì˜ ë„ì›€ì„ ì œëŒ€ë¡œ ì–»ê¸° í˜ë“¤ë‹¤**

- **í•¸ë“¤ í´ë˜ìŠ¤ì˜ ë‹¨ì **
    1. êµ¬í˜„ë¶€ ê°ì²´ì— ì ‘ê·¼í•˜ê¸° ìœ„í•´ êµ¬í˜„ë¶€ í¬ì¸í„°ë¥¼ í†µí•´ì•¼ í•¨  
	â†’ **ì—°ì‚° í•œë‹¨ê³„ ì¦ê°€**
    2. ê° ê°ì²´ë§ˆë‹¤ êµ¬í˜„ë¶€ í¬ì¸í„°ë§Œí¼ **ë©”ëª¨ë¦¬ í¬ê¸° ì¦ê°€**
    3. êµ¬í˜„ë¶€ í¬ì¸í„°ê°€ êµ¬í˜„ë¶€ ê°ì²´ë¥¼ ê°€ë¦¬í‚¤ë„ë¡ ì´ˆê¸°í™” í•„ìš”  
    â†’ **ë™ì  ë©”ëª¨ë¦¬ í• ë‹¹ ì—°ì‚° ì˜¤ë²„í—¤ë“œ ë°œìƒ + bad_alloc ì˜ˆì™¸ ê°€ëŠ¥ì„± ì¡´ì¬**

- **ì¸í„°í˜ì´ìŠ¤ í´ë˜ìŠ¤ì˜ ë‹¨ì **
    1. í˜¸ì¶œë˜ëŠ” í•¨ìˆ˜ê°€ ëª¨ë‘ ê°€ìƒ í•¨ìˆ˜  
    â†’ í•¨ìˆ˜ í˜¸ì¶œì´ ì¼ì–´ë‚  ë•Œë§ˆë‹¤, **ê°€ìƒ í…Œì´ë¸” ì í”„ ë¹„ìš© ì†Œëª¨**
    2. ì¸í„°í˜ì´ìŠ¤ í´ë˜ìŠ¤ì—ì„œ íŒŒìƒëœ ê°ì²´ëŠ” ê°€ìƒ í…Œì´ë¸” í¬ì¸í„°ë¥¼ ê°€ì ¸ì•¼ í•¨  
    â†’ **ë©”ëª¨ë¦¬ í¬ê¸° ì¦ê°€**

---

### ğŸ“Œ ì‹¤ë¬´ ì ìš© ë°©ë²•

- **ê°œë°œ ë„ì¤‘ì—ëŠ”** í•¸ë“¤ í´ë˜ìŠ¤ í˜¹ì€ ì¸í„°í˜ì´ìŠ¤ í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì
- **ë‹¨ì ìœ¼ë¡œ ì¸í•´ ë§ì€ ì†í•´ë¥¼ ë³´ê²Œ ë˜ëŠ” ê²½ìš°**, êµ¬ì²´ í´ë˜ìŠ¤ë¡œ ë³€ê²½í•˜ì

---

### ğŸ§ ì •ë¦¬

1. **ì»´íŒŒì¼ ì˜ì¡´ì„±ì„ ìµœì†Œí™”í•˜ê¸° ìœ„í•´ 'ì •ì˜' ëŒ€ì‹  'ì„ ì–¸'ì— ì˜ì¡´í•˜ê²Œ í•˜ì.**
2. **ë¼ì´ë¸ŒëŸ¬ë¦¬ í—¤ë”ëŠ” ëª¨ë“  ê²ƒì„ ê°–ì¶”ì–´ì•¼ í•˜ë©°, ì„ ì–¸ë¶€ë§Œ ê°–ê³  ìˆì–´ì•¼ í•œë‹¤. í…œí”Œë¦¿ì˜ ì‚¬ìš© ì—¬ë¶€ì™€ ê´€ê³„ì—†ì´ ì ìš©í•˜ì.**